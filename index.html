<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØªÙŠ - Ù…Ù†ØµØ© Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header>
        <div class="container">
            <div class="logo">
                <i class="fas fa-store"></i>
                <span>Ù…Ù†ØµØªÙŠ</span>
            </div>
            
            <nav>
                <a href="#home"><i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#features"><i class="fas fa-star"></i> Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</a>
                <a href="vendor/dashboard.html"><i class="fas fa-store-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹</a>
                <a href="admin/dashboard.html"><i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                <div id="user-info" style="display: none; margin-right: 15px;"></div>
                
                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (ØªØ¸Ù‡Ø± Ù„Ù„Ø²ÙˆØ§Ø±) -->
                <div class="auth-btn" style="display: flex; gap: 10px;">
                    <a href="auth/register.html" class="btn-login">
                        <i class="fas fa-user-plus"></i> Ø³Ø¬Ù„ Ù…Ø¬Ø§Ù†Ø§Ù‹
                    </a>
                    <a href="auth/login.html" class="btn-login" style="background: #4CAF50;">
                        <i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„
                    </a>
                </div>
            </nav>
            
            <button class="menu-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1><span class="highlight">Ø£Ù†Ø´Ø¦ Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span><br>ÙˆØ§Ø±Ø¨Ø­ Ù…Ø¹ Ø£Ù…Ø§Ø²ÙˆÙ† ÙˆØ¨Ø§Ø¦Ø¹ÙŠÙ† Ø¢Ø®Ø±ÙŠÙ†</h1>
                <p class="subtitle">Ù…Ù†ØµØ© Ù…ØªÙƒØ§Ù…Ù„Ø© ØªØ±Ø¨Ø­ ÙÙŠÙ‡Ø§ Ù…Ù† <strong>Ø¹Ù…ÙˆÙ„Ø© Ø£Ù…Ø§Ø²ÙˆÙ†</strong> + <strong>Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</strong></p>
                
                <div class="hero-buttons">
                    <a href="auth/register.html" class="btn-primary">
                        <i class="fas fa-rocket"></i> Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹
                    </a>
                    <a href="#how-it-works" class="btn-secondary">
                        <i class="fas fa-play-circle"></i> Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø´Ø±Ø­
                    </a>
                </div>

                <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­ÙŠØ© Ù…Ù† Firebase -->
                <div class="hero-stats">
                    <div class="stat">
                        <h3 id="vendors-count">0</h3>
                        <p>Ø¨Ø§Ø¦Ø¹ Ù†Ø´Ø·</p>
                    </div>
                    <div class="stat">
                        <h3 id="products-count">0</h3>
                        <p>Ù…Ù†ØªØ¬ Ù…ØªØ§Ø­</p>
                    </div>
                    <div class="stat">
                        <h3 id="sales-count">$0</h3>
                        <p>Ù…Ø¨ÙŠØ¹Ø§Øª</p>
                    </div>
                    <div class="stat">
                        <h3>10%</h3>
                        <p>Ø¹Ù…ÙˆÙ„Ø© Ø£Ù…Ø§Ø²ÙˆÙ†</p>
                    </div>
                </div>
            </div>
            
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&auto=format&fit=crop" alt="Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            </div>
        </div>
    </section>

    <!-- Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">Ù„Ù…Ø§Ø°Ø§ ØªØ®ØªØ§Ø± <span class="highlight">Ù…Ù†ØµØªÙŠ</span>ØŸ</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3>Firebase Ù…Ø¬Ø§Ù†ÙŠ</h3>
                    <p>Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ù† Ø¬ÙˆØ¬Ù„</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fab fa-amazon"></i>
                    </div>
                    <h3>Ø£Ù…Ø§Ø²ÙˆÙ† Ù…Ø¨Ø§Ø´Ø±Ø©</h3>
                    <p>Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙˆØ±Ø¨Ø­ Ø¹Ù…ÙˆÙ„Ø© 10% ÙÙˆØ±Ø§Ù‹</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <h3>Ø±Ø¨Ø­ Ù…Ø²Ø¯ÙˆØ¬</h3>
                    <p>Ø§Ø±Ø¨Ø­ Ù…Ù† Ø£Ù…Ø§Ø²ÙˆÙ† ÙˆØ§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ† Ù…Ø¹Ø§Ù‹</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3><i class="fas fa-store"></i> Ù…Ù†ØµØªÙŠ</h3>
                    <p>Ù…Ù†ØµØ© ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Firebase</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h3>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                    <ul>
                        <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><a href="vendor/dashboard.html">Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹</a></li>
                        <li><a href="admin/dashboard.html">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a></li>
                        <li><a href="products/import.html">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù†ØªØ¬Ø§Øª</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª</h3>
                    <ul>
                        <li>Firebase Database</li>
                        <li>Amazon API</li>
                        <li>HTML/CSS/JS</li>
                        <li>GitHub Pages</li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <p id="system-status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                    <p id="firebase-status-text">Firebase: âŒ ØºÙŠØ± Ù…ØªØµÙ„</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>Â© 2024 Ù…Ù†ØµØªÙŠ. ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ù€ Firebase.</p>
                <p id="current-time">--:--:--</p>
            </div>
        </div>
    </footer>

    <!-- ============================================ -->
    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase - ØªØ¸Ù‡Ø± ÙÙŠ Ø£Ø³ÙÙ„ ÙŠØ³Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <!-- ============================================ -->

    <!-- Ø²Ø± ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©) -->
    <button onclick="showFirebasePanel()" 
            id="firebase-panel-btn"
            style="position: fixed; bottom: 20px; left: 20px; z-index: 9998; 
                   background: #FF9800; color: white; border: none; 
                   width: 50px; height: 50px; border-radius: 50%; 
                   cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2); 
                   font-size: 20px; display: flex; align-items: center; 
                   justify-content: center; transition: transform 0.3s;"
            onmouseover="this.style.transform='scale(1.1)'"
            onmouseout="this.style.transform='scale(1)'"
            title="ØªØ­ÙƒÙ… ÙÙŠ Firebase">
        ğŸ”¥
    </button>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) -->
    <div id="firebase-control-panel" 
         style="position: fixed; bottom: 80px; left: 20px; z-index: 9999; 
                background: white; padding: 20px; border-radius: 15px; 
                box-shadow: 0 5px 20px rgba(0,0,0,0.3); width: 320px; 
                display: none; border: 2px solid #FF9800;">
        
        <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙˆØ­Ø© -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h4 style="margin: 0; color: #333; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-fire" style="color: #FF9800;"></i>
                ØªØ­ÙƒÙ… Firebase
            </h4>
            <button onclick="hideFirebasePanel()" 
                    style="background: #f44336; color: white; border: none; 
                           width: 32px; height: 32px; border-radius: 50%; 
                           cursor: pointer; font-size: 18px; display: flex; 
                           align-items: center; justify-content: center;">
                âœ•
            </button>
        </div>
        
        <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
        <div style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                <div id="firebase-status-indicator" 
                     style="width: 12px; height: 12px; border-radius: 50%; background: #ccc;"></div>
                <span id="firebase-status-text" style="font-weight: bold;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </div>
            <div style="font-size: 12px; color: #666;">
                Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: <span id="firebase-project-id">my-marketplace-64afa</span>
            </div>
        </div>
        
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button onclick="testFirebaseConnection()" 
                    class="firebase-btn" 
                    style="background: #2196F3;">
                <i class="fas fa-plug"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
            </button>
            
            <button onclick="createTestUser()" 
                    class="firebase-btn" 
                    style="background: #4CAF50;">
                <i class="fas fa-user-plus"></i> Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
            </button>
            
            <button onclick="addTestProduct()" 
                    class="firebase-btn" 
                    style="background: #FF9800;">
                <i class="fas fa-box"></i> Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ
            </button>
            
            <button onclick="logoutUser()" 
                    class="firebase-btn" 
                    style="background: #f44336;">
                <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
            </button>
        </div>
        
        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 12px;">
                <div>
                    <div style="color: #666;">ğŸ”„ Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
                    <div id="firebase-update-time" style="font-weight: bold;">--:--:--</div>
                </div>
                <div>
                    <div style="color: #666;">ğŸ“Š Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                    <div id="products-count-panel" style="font-weight: bold; color: #4CAF50;">0</div>
                </div>
                <div>
                    <div style="color: #666;">ğŸ‘¥ Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</div>
                    <div id="vendors-count-panel" style="font-weight: bold; color: #2196F3;">0</div>
                </div>
                <div>
                    <div style="color: #666;">ğŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
                    <div id="sales-count-panel" style="font-weight: bold; color: #FF9800;">$0</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø£Ù†Ù…Ø§Ø· CSS Ù„Ø£Ø²Ø±Ø§Ø± Firebase -->
    <style>
        .firebase-btn {
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
        }
        
        .firebase-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .firebase-btn:active {
            transform: translateY(0);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .firebase-btn.pulse {
            animation: pulse 1s infinite;
        }
    </style>

    <!-- JavaScript -->
    <script>
        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ù…Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹
        // ============================================
        
        function toggleMenu() {
            const nav = document.querySelector('nav');
            nav.classList.toggle('active');
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ar-EG');
            const dateStr = now.toLocaleDateString('ar-EG');
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = `${dateStr} - ${timeStr}`;
            }
            
            // ØªØ­Ø¯ÙŠØ« ÙˆÙ‚Øª Ù„ÙˆØ­Ø© Firebase
            const updateTimeElement = document.getElementById('firebase-update-time');
            if (updateTimeElement) {
                updateTimeElement.textContent = timeStr;
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
        setInterval(updateTime, 1000);
        updateTime();

        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase
        // ============================================
        
        let firebasePanelVisible = false;
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function showFirebasePanel() {
            const panel = document.getElementById('firebase-control-panel');
            const button = document.getElementById('firebase-panel-btn');
            
            if (panel) {
                panel.style.display = 'block';
                panel.style.animation = 'slideIn 0.3s ease';
                firebasePanelVisible = true;
                
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø± Ù…Ø¤Ù‚ØªØ§Ù‹
                if (button) {
                    button.style.opacity = '0.5';
                    button.style.transform = 'scale(0.9)';
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø©
                updateFirebasePanel();
            }
        }
        
        // Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        function hideFirebasePanel() {
            const panel = document.getElementById('firebase-control-panel');
            const button = document.getElementById('firebase-panel-btn');
            
            if (panel) {
                panel.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    panel.style.display = 'none';
                }, 300);
                
                firebasePanelVisible = false;
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø±
                if (button) {
                    button.style.opacity = '1';
                    button.style.transform = 'scale(1)';
                }
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Firebase
        function updateFirebasePanel() {
            const statusIndicator = document.getElementById('firebase-status-indicator');
            const statusText = document.getElementById('firebase-status-text');
            
            if (!statusIndicator || !statusText) return;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Firebase
            if (window.firebaseReady === true) {
                statusIndicator.style.background = '#4CAF50';
                statusIndicator.style.boxShadow = '0 0 10px #4CAF50';
                statusText.innerHTML = '<span style="color: #4CAF50;">âœ… Firebase Ù…ØªØµÙ„</span>';
                statusText.title = 'Ø§Ù„Ø§ØªØµØ§Ù„ Ù†Ø´Ø· ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…';
            } else if (window.firebaseReady === false) {
                statusIndicator.style.background = '#f44336';
                statusIndicator.style.boxShadow = '0 0 10px #f44336';
                statusText.innerHTML = '<span style="color: #f44336;">âŒ Firebase ØºÙŠØ± Ù…ØªØµÙ„</span>';
                statusText.title = 'Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„"';
            } else {
                statusIndicator.style.background = '#FF9800';
                statusIndicator.style.boxShadow = '0 0 10px #FF9800';
                statusText.innerHTML = '<span style="color: #FF9800;">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>';
                statusText.title = 'Firebase Ù‚ÙŠØ¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            updateFirebaseStats();
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Firebase
        async function updateFirebaseStats() {
            try {
                if (window.firebaseReady && window.db) {
                    // Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                    const productsSnapshot = await window.db.collection('products')
                        .where('status', '==', 'active')
                        .get();
                    
                    // Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†
                    const vendorsSnapshot = await window.db.collection('vendors')
                        .where('status', '==', 'active')
                        .get();
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø©
                    document.getElementById('products-count-panel').textContent = productsSnapshot.size;
                    document.getElementById('vendors-count-panel').textContent = vendorsSnapshot.size;
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    document.getElementById('products-count').textContent = productsSnapshot.size;
                    document.getElementById('vendors-count').textContent = vendorsSnapshot.size;
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (ØªØ®Ù…ÙŠÙ†ÙŠ)
                    let totalSales = 0;
                    vendorsSnapshot.forEach(doc => {
                        const data = doc.data();
                        totalSales += data.totalSales || 0;
                    });
                    
                    document.getElementById('sales-count-panel').textContent = '$' + totalSales;
                    document.getElementById('sales-count').textContent = '$' + totalSales;
                }
            } catch (error) {
                console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);
            }
        }
        
        // ============================================
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ø®ØªØ¨Ø§Ø± Firebase
        // ============================================
        
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Firebase
        window.testFirebaseConnection = async function() {
            const statusText = document.getElementById('firebase-status-text');
            
            if (statusText) {
                statusText.innerHTML = '<span style="color: #FF9800;">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„...</span>';
            }
            
            try {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ÙˆØ¸ÙŠÙØ© testFirebaseConnection ÙÙŠ firebase-config.js
                if (typeof window.testFirebaseConnection === 'function') {
                    const result = await window.testFirebaseConnection();
                    
                    if (result) {
                        if (statusText) {
                            statusText.innerHTML = '<span style="color: #4CAF50;">âœ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§Ø¬Ø­!</span>';
                        }
                        alert('ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Firebase Ù…ØªØµÙ„ Ø¨Ù†Ø¬Ø§Ø­!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù†:\nâ€¢ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\nâ€¢ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª\nâ€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                        
                        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ÙˆØ­Ø©
                        setTimeout(updateFirebasePanel, 1000);
                        
                        return true;
                    }
                } else {
                    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©
                    if (window.firebaseReady && window.db) {
                        const testDoc = await window.db.collection('_tests').doc('connection').set({
                            test: true,
                            timestamp: new Date().toISOString(),
                            host: window.location.hostname
                        });
                        
                        alert('âœ… Firebase ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
                        
                        if (statusText) {
                            statusText.innerHTML = '<span style="color: #4CAF50;">âœ… Ù…ØªØµÙ„</span>';
                        }
                        
                        return true;
                    }
                }
            } catch (error) {
                console.error('âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Firebase:', error);
                
                if (statusText) {
                    statusText.innerHTML = '<span style="color: #f44336;">âŒ ÙØ´Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span>';
                }
                
                alert(`âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Firebase:\n${error.message}\n\nØªØ­Ù‚Ù‚ Ù…Ù†:\n1. Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª\n2. Ù…Ù„Ù firebase-config.js\n3. Console Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„`);
                
                return false;
            }
        };
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
        window.createTestUser = async function() {
            try {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Firebase
                if (!window.firebaseReady) {
                    const connected = await testFirebaseConnection();
                    if (!connected) return;
                }
                
                const email = `test${Date.now()}@example.com`;
                const password = 'Test123456';
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                const userCredential = await window.auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
                await window.db.collection('users').doc(user.uid).set({
                    email: email,
                    name: 'Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    phone: '01000000000',
                    userType: 'vendor',
                    createdAt: window.firebaseInstance.firestore.FieldValue.serverTimestamp(),
                    status: 'active'
                });
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ
                await window.db.collection('vendors').doc(user.uid).set({
                    vendorId: user.uid,
                    storeName: `Ù…ØªØ¬Ø± ${user.email.split('@')[0]}`,
                    email: email,
                    createdAt: window.firebaseInstance.firestore.FieldValue.serverTimestamp(),
                    status: 'active',
                    plan: 'free'
                });
                
                alert(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ!\n\nğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${email}\nğŸ”‘ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${password}\n\nÙŠÙ…ÙƒÙ†Ùƒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†.`);
                
                return userCredential;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
                alert(`âŒ ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:\n${error.message}`);
                return null;
            }
        };
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ
        window.addTestProduct = async function() {
            try {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Firebase
                if (!window.firebaseReady) {
                    const connected = await testFirebaseConnection();
                    if (!connected) return;
                }
                
                const productData = {
                    name: 'Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù…Ù† Firebase',
                    price: 99.99,
                    category: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª',
                    description: 'Ù‡Ø°Ø§ Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹ Ù…Ù†ØµØªÙŠ',
                    vendorId: 'test-vendor',
                    vendorName: 'Ù…ØªØ¬Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ',
                    status: 'active',
                    createdAt: window.firebaseInstance.firestore.FieldValue.serverTimestamp(),
                    updatedAt: window.firebaseInstance.firestore.FieldValue.serverTimestamp(),
                    images: ['https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop'],
                    stock: 100,
                    tags: ['ØªØ¬Ø±ÙŠØ¨ÙŠ', 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', 'Ø¬Ø¯ÙŠØ¯']
                };
                
                const docRef = await window.db.collection('products').add(productData);
                
                alert(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ!\n\nğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${docRef.id}\nğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬: ${productData.name}\nğŸ’° Ø§Ù„Ø³Ø¹Ø±: $${productData.price}`);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateFirebaseStats();
                
                return docRef.id;
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬:', error);
                alert(`âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬:\n${error.message}`);
                return null;
            }
        };
        
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        window.logoutUser = function() {
            if (!window.firebaseReady || !window.auth.currentUser) {
                alert('âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø­Ø§Ù„ÙŠÙ‹Ø§');
                return;
            }
            
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                window.auth.signOut()
                    .then(() => {
                        alert('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                        window.location.reload();
                    })
                    .catch((error) => {
                        alert(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬:\n${error.message}`);
                    });
            }
        };
        
        // ============================================
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        // ============================================
        
        function updateSystemStatus() {
            const statusElement = document.getElementById('system-status');
            const firebaseStatus = document.getElementById('firebase-status-text');
            
            if (statusElement) {
                if (window.firebaseReady === true) {
                    statusElement.innerHTML = '<span style="color: #4CAF50;">â—</span> Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ';
                } else if (window.firebaseReady === false) {
                    statusElement.innerHTML = '<span style="color: #f44336;">â—</span> Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ (Ø¨Ø¯ÙˆÙ† Firebase)';
                } else {
                    statusElement.innerHTML = '<span style="color: #FF9800;">â—</span> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±
            if (firebasePanelVisible) {
                updateFirebasePanel();
            }
        }
        
        // ============================================
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø­Ù…Ù„Ø©');
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ
            setInterval(updateSystemStatus, 3000);
            updateSystemStatus();
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Firebase ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
            setInterval(updateFirebaseStats, 10000);
            
            // Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Firebase Ø¨Ø¹Ø¯ 30 Ø«Ø§Ù†ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„
            setTimeout(() => {
                if (window.firebaseReady === true) {
                    const firebaseBtn = document.getElementById('firebase-panel-btn');
                    if (firebaseBtn) {
                        firebaseBtn.style.opacity = '0.3';
                        firebaseBtn.style.transition = 'opacity 2s';
                    }
                }
            }, 30000);
            
            // Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· CSS Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
            if (!document.getElementById('panel-styles')) {
                const style = document.createElement('style');
                style.id = 'panel-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(-20px); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(-20px); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        });
    </script>
</body>
</html>
